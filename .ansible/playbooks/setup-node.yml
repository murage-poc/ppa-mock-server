---
- hosts: all
  gather_facts: true
  become: false
  vars:
    NODEJS_VERSION: "lts/fermium"
  tasks:

    - name: Install NVM
      shell: >
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
      no_log: True

    - name: Install NodeJs
      shell: "nvm install {{ NODEJS_VERSION }}"

    - name: Install yarn
      shell: npm install yarn -g
      no_log: True

    - name: Install pm2
      shell: yarn global add pm2
      no_log: True
